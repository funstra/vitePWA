const y=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}};y();const h=document.querySelector("#listing .products"),L=document.querySelector("#listing > template"),E=new Date,w=async l=>{l.forEach(e=>{const t=L.content.cloneNode(!0),n=t.firstElementChild;n.dataset.productId=e.id,t.querySelector(".info").textContent=e.id,t.querySelector("img").src=`https://picsum.photos/seed/${E.getTime()+e.id+1}/32.webp`,h.appendChild(t),setTimeout(()=>{n.classList.remove("hidden")},75)})},C=[{id:0},{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8}];var f={products:C};__AppClosure.products=f.products;w(f.products);const m=document.querySelector("#listing"),S=document.querySelector(".products");__AppClosure.selected=[];const g=l=>{let e=l.target;const t=e.closest(".product");let n=e.getBoundingClientRect();const{clientX:o}=l,r=(o-n.left)/n.width,s=c=>{var p;const{clientX:u}=c,d=(u-n.left)/n.width-r;if(console.log(d),d<-.25){console.log("inc");const a=+t.dataset.count||0;t.dataset.count=a+1,e.style.setProperty("--count",(a+1).toString()),e.removeEventListener("pointermove",s)}else if(d>.25){console.log("dec");const a=+t.dataset.count||0;t.dataset.count=Math.max(a-1,0),e.style.setProperty("--count",Math.max(a-1,0).toString()),e.removeEventListener("pointermove",s)}e.textContent=`< ${(p=t.dataset.count)!=null?p:"0"} >`},i=c=>{e.removeEventListener("pointermove",s),e.removeEventListener("pointerleave",i)};e.addEventListener("pointermove",s),e.addEventListener("pointerleave",i)},P=l=>{l.stopPropagation();let e=l.target;if(e.tagName!=="LI")return;let t=e.dataset.lock=="true",n=!1,o=!1,r=125,s=+getComputedStyle(e).getPropertyValue("--a-duration").slice(0,-2);const i=c=>{o=!0,n&&(t?e.classList.add("gracing"):e.classList.remove("gracing"))};e.addEventListener("pointerleave",i),setTimeout(()=>{o||(t?e.classList.remove("gracing"):e.classList.add("gracing"),n=!0,setTimeout(()=>{if(!o){const c=+e.dataset.productId;t?(console.log(`id: ${c}`),console.log("removing product from selected"),__AppClosure.selected=__AppClosure.selected.filter(d=>d.id!==c)):(console.log("adding product to selected"),__AppClosure.selected.push(__AppClosure.products.find(d=>d.id==c))),e.dataset.lock=t?"false":"true",t=!t;const u=e.querySelector(".controll");e.dataset.count?u.textContent=t?`< ${e.dataset.count} >`:e.dataset.count:u.textContent=t?"< 0 >":"",console.log(e.dataset.lock),t?(console.log("check swipe"),e.querySelector(".controll").addEventListener("pointerdown",g)):(console.log("remove check swipe"),e.querySelector(".controll").removeEventListener("pointerdown",g))}e.removeEventListener("pointerleave",i)},s))},r)};S.onpointerdown=P;const v=document.querySelector("#drawer"),b=l=>{l.stopPropagation();const{clientY:e}=l,t=v;t.getBoundingClientRect();let n=0;const o=s=>{const{clientY:i}=s;n=100*(e-i)/window.innerHeight,t.style.setProperty("--h-offset",`${n}%`)};t.addEventListener("pointermove",o);const r=s=>{t.removeEventListener("pointermove",o),n>5?(console.log(n),console.log("greater"),t.dispatchEvent(new CustomEvent("app-context",{bubbles:!0,detail:{action:"none:open"}})),t.style.removeProperty("--h-offset"),m.style.setProperty("--compress",1)):n<-5?(console.log("lesser"),t.dispatchEvent(new CustomEvent("app-context",{bubbles:!0,detail:{action:"none:close"}})),t.style.removeProperty("--h-offset"),m.style.removeProperty("--compress")):t.style.removeProperty("--h-offset"),n=0,t.style.transition="height 125ms",setTimeout(()=>{t.style.transition=""},150)};t.addEventListener("pointerup",r)};v.onpointerdown=b;
